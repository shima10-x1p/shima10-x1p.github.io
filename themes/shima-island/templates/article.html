{% extends "base.html" %}

{% block title %}{{ article.title }} | {{ SITENAME }}{% endblock title %}
{% block page_description %}{{ article.summary | striptags | truncate(120) }}{% endblock page_description %}
{% block layout_mode %}single{% endblock layout_mode %}

{% block content %}
{% set thumbnail_path = article | resolve_article_thumbnail %}
{% if thumbnail_path and (thumbnail_path.startswith("http://") or thumbnail_path.startswith("https://") or thumbnail_path.startswith("//")) %}
    {% set thumbnail_src = thumbnail_path %}
{% elif thumbnail_path %}
    {% set thumbnail_src = SITEURL ~ "/" ~ thumbnail_path %}
{% else %}
    {% set thumbnail_src = none %}
{% endif %}
<article class="article-shell">
    {% if thumbnail_src %}
    <figure class="article-thumbnail-wrapper">
        <img
            src="{{ thumbnail_src }}"
            alt="{{ article.title }}"
            class="article-thumbnail"
            loading="eager"
            decoding="async"
        />
    </figure>
    {% endif %}

    <header class="article-header">
        <div class="article-meta">
            <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
            {% if article.category %}
            <span>•</span>
            <span class="article-category">{{ article.category }}</span>
            {% endif %}
        </div>
        <h1 class="article-title">{{ article.title }}</h1>
    </header>


    <section class="entry-content">
        {{ article.content }}
    </section>

    <footer class="article-footer">
        {% if article.tags %}
        <div class="tags-list">
            {% for tag in article.tags %}
            <a href="{{ SITEURL }}/{{ tag.url }}" class="tag-badge">#{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}
        <a href="{{ SITEURL }}/" role="button" class="outline">一覧に戻る</a>
    </footer>
</article>
{% endblock content %}
